os:
  - linux

sudo: required
dist: xenial

language: python
python:
  - 3.7

services:
  - mysql

before_install:
  - mysql -e 'CREATE DATABASE pymatcha;'

install: pip install -r backend/requirements-dev.txt

jobs:
  include:
    - stage: build
      script: make build
    - stage: lint
      script: make lint
    - stage: tests
      script: make tests
#    - stage: deploy
#      script: ./deploy

notifications:
  email:
    recipients:
      - jlasne@student.42.fr
      - gmorer@student.42.fr
    on_success: change
on_failure: always


#deploy:
#  provider: heroku
#  api_key:
#    secure: kUtYCOzPTUlcJ8nicEynPq39xfVgUtl8LT2zdh/L1MQ6SRKYKT6V+TWSuGNXc9YRn7Sd6dVqYDimz3aK7eQrdBehZxuHy1FvL9qzdWsGeefrFDD5VKf5qyRFmX1+nSir/5WBsGRUhlcPiqMo2WvRWrrARiM+kscULJCpxUJ/rqk2XSxKY+UikWpKgmcgK8ONBdrmK0+ixEqwOHHLU/WfBPHOAdmZM7V3DIeWq75dYee7rfFSejHsUzm8nsMszy5kgsFWj82daYqUTWOVe92v/E5bwGHhqmX2qjXO9d5qm3dVwg7L7gUHB2cUL3sp5EXiH9OdmZhE+QHob155ApkwMqYJo5L7U7/4Az7i/6oiTOfbnUCyCK2g9D0Qng6T4OwlsfH1l182V5I4fWIN94sQuEhh2W+Auu5EjhmsSMwCdYYuI6K5V4ht2aCLVlQ5jdfG8rt78kjsrjLlw8Vu2aprkM1JrTiUFGr5legrAX40BpozOFl913waRScJc65BsBnVkrFeTrmlmWIXe63Gc4LKXc8XaAqVLl3cyhIIyQ4Q0km5UH8/nraKDzw0I0sLLmk2AXBDEnNHDt2E1QmacsfaX+XE2URT74YVBRmxRdpJv6vJsvZEtXpRMHrzf4DK4coS1q5rkHnUXpajf65tB//isrQkbtENnjFZ1EP0zE9OJwY=
#  app: pymatcha
#  on:
#    repo: Seluj78/PyMatcha
